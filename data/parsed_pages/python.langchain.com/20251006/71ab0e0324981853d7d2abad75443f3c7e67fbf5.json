{
  "provenance": {
    "url_final": "https://python.langchain.com/docs/how_to/binding/",
    "title": "How to add default invocation args to a Runnable | ü¶úÔ∏èüîó LangChain",
    "fetched_at": "2025-10-06T21:54:23.858559"
  },
  "sections": [
    {
      "level": 1,
      "heading_text": "How to add default invocation args to a Runnable | ü¶úÔ∏èüîó LangChain",
      "blocks": [
        {
          "type": "paragraph",
          "text": "This guide assumes familiarity with the following concepts:"
        },
        {
          "type": "list",
          "ordered": false,
          "items": [
            "LangChain Expression Language (LCEL)",
            "Chaining runnables",
            "Tool calling"
          ]
        },
        {
          "type": "paragraph",
          "text": "Sometimes we want to invoke a Runnable within a RunnableSequence with constant arguments that are not part of the output of the preceding Runnable in the sequence, and which are not part of the user input. We can use the Runnable.bind() method to set these arguments ahead of time."
        }
      ],
      "children": [
        {
          "level": 2,
          "heading_text": "Binding stop sequences‚Äã",
          "anchor": "binding-stop-sequences",
          "blocks": [
            {
              "type": "paragraph",
              "text": "Suppose we have a simple prompt + model chain:"
            },
            {
              "type": "code",
              "code": "from langchain_core.output_parsers import StrOutputParserfrom langchain_core.prompts import ChatPromptTemplatefrom langchain_core.runnables import RunnablePassthroughfrom langchain_openai import ChatOpenAIprompt = ChatPromptTemplate.from_messages(    [        (            \"system\",            \"Write out the following equation using algebraic symbols then solve it. Use the format\\n\\nEQUATION:...\\nSOLUTION:...\\n\\n\",        ),        (\"human\", \"{equation_statement}\"),    ])model = ChatOpenAI(temperature=0)runnable = (    {\"equation_statement\": RunnablePassthrough()} | prompt | model | StrOutputParser())print(runnable.invoke(\"x raised to the third plus seven equals 12\"))"
            },
            {
              "type": "code",
              "code": "EQUATION: x^3 + 7 = 12SOLUTION: Subtract 7 from both sides:x^3 = 5Take the cube root of both sides:x = ‚àõ5"
            },
            {
              "type": "paragraph",
              "text": "and want to call the model with certain stop words so that we shorten the output as is useful in certain types of prompting techniques. While we can pass some arguments into the constructor, other runtime args use the .bind() method as follows:"
            },
            {
              "type": "code",
              "code": "runnable = (    {\"equation_statement\": RunnablePassthrough()}    | prompt    | model.bind(stop=\"SOLUTION\")    | StrOutputParser())print(runnable.invoke(\"x raised to the third plus seven equals 12\"))"
            },
            {
              "type": "code",
              "code": "EQUATION: x^3 + 7 = 12"
            },
            {
              "type": "paragraph",
              "text": "What you can bind to a Runnable will depend on the extra parameters you can pass when invoking it."
            }
          ],
          "children": []
        },
        {
          "level": 2,
          "heading_text": "Attaching OpenAI tools‚Äã",
          "anchor": "attaching-openai-tools",
          "blocks": [
            {
              "type": "paragraph",
              "text": "Another common use-case is tool calling. While you should generally use the .bind_tools() method for tool-calling models, you can also bind provider-specific args directly if you want lower level control:"
            },
            {
              "type": "code",
              "code": "tools = [    {        \"type\": \"function\",        \"function\": {            \"name\": \"get_current_weather\",            \"description\": \"Get the current weather in a given location\",            \"parameters\": {                \"type\": \"object\",                \"properties\": {                    \"location\": {                        \"type\": \"string\",                        \"description\": \"The city and state, e.g. San Francisco, CA\",                    },                    \"unit\": {\"type\": \"string\", \"enum\": [\"celsius\", \"fahrenheit\"]},                },                \"required\": [\"location\"],            },        },    }]"
            },
            {
              "type": "code",
              "code": "model = ChatOpenAI(model=\"gpt-4o-mini\").bind(tools=tools)model.invoke(\"What's the weather in SF, NYC and LA?\")"
            },
            {
              "type": "code",
              "code": "AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_z0OU2CytqENVrRTI6T8DkI3u', 'function': {'arguments': '{\"location\": \"San Francisco, CA\", \"unit\": \"celsius\"}', 'name': 'get_current_weather'}, 'type': 'function'}, {'id': 'call_ft96IJBh0cMKkQWrZjNg4bsw', 'function': {'arguments': '{\"location\": \"New York, NY\", \"unit\": \"celsius\"}', 'name': 'get_current_weather'}, 'type': 'function'}, {'id': 'call_tfbtGgCLmuBuWgZLvpPwvUMH', 'function': {'arguments': '{\"location\": \"Los Angeles, CA\", \"unit\": \"celsius\"}', 'name': 'get_current_weather'}, 'type': 'function'}]}, response_metadata={'token_usage': {'completion_tokens': 84, 'prompt_tokens': 85, 'total_tokens': 169}, 'model_name': 'gpt-4o-mini', 'system_fingerprint': 'fp_77a673219d', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-d57ad5fa-b52a-4822-bc3e-74f838697e18-0', tool_calls=[{'name': 'get_current_weather', 'args': {'location': 'San Francisco, CA', 'unit': 'celsius'}, 'id': 'call_z0OU2CytqENVrRTI6T8DkI3u'}, {'name': 'get_current_weather', 'args': {'location': 'New York, NY', 'unit': 'celsius'}, 'id': 'call_ft96IJBh0cMKkQWrZjNg4bsw'}, {'name': 'get_current_weather', 'args': {'location': 'Los Angeles, CA', 'unit': 'celsius'}, 'id': 'call_tfbtGgCLmuBuWgZLvpPwvUMH'}])"
            }
          ],
          "children": []
        },
        {
          "level": 2,
          "heading_text": "Next steps‚Äã",
          "anchor": "next-steps",
          "blocks": [
            {
              "type": "paragraph",
              "text": "You now know how to bind runtime arguments to a Runnable."
            },
            {
              "type": "paragraph",
              "text": "To learn more, see the other how-to guides on runnables in this section, including:"
            },
            {
              "type": "list",
              "ordered": false,
              "items": [
                "Using configurable fields and alternatives to change parameters of a step in a chain, or even swap out entire steps, at runtime"
              ]
            },
            {
              "type": "list",
              "ordered": false,
              "items": [
                "Binding stop sequences",
                "Attaching OpenAI tools",
                "Next steps"
              ]
            }
          ],
          "children": []
        }
      ]
    }
  ]
}